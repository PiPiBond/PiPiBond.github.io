import{_ as t,X as l,Y as i,Z as s,a0 as a,$ as n,a1 as o,E as r}from"./framework-23afdf50.js";const p={},c=s("h2",{id:"前期准备",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#前期准备","aria-hidden":"true"},"#"),n(" 前期准备：")],-1),d={href:"https://www.microsoft.com/zh-cn/software-download/",target:"_blank",rel:"noopener noreferrer"},v=s("strong",null,"Windows 10+",-1),k={href:"https://nginx.org/en/download.html",target:"_blank",rel:"noopener noreferrer"},m=s("strong",null,"Nginx",-1),u=s("p",null,[s("strong",null,"keytool"),n("（Windows 自带）")],-1),b=s("strong",null,"openssl",-1),h={href:"https://git-scm.com/downloads",target:"_blank",rel:"noopener noreferrer"},g=o(`<p><strong>JDK</strong>（实验环境：JDK11）</p><h2 id="生成-jks-格式密钥库" tabindex="-1"><a class="header-anchor" href="#生成-jks-格式密钥库" aria-hidden="true">#</a> 生成 JKS 格式密钥库</h2><p>打开 Windows 终端</p><p>在终端键入</p><h2 id="shellkeytool-genkeypair-alias-要处理的条目的别名-keyalg-密钥算法名称-keysize-密钥位大小-keypass-密钥口令-validity-有效天数-keystore-密钥库名称-storepass-密钥库口令" tabindex="-1"><a class="header-anchor" href="#shellkeytool-genkeypair-alias-要处理的条目的别名-keyalg-密钥算法名称-keysize-密钥位大小-keypass-密钥口令-validity-有效天数-keystore-密钥库名称-storepass-密钥库口令" aria-hidden="true">#</a> ---shell keytool -genkeypair -alias &lt;要处理的条目的别名&gt; -keyalg &lt;密钥算法名称&gt; -keysize &lt;密钥位大小&gt; -keypass &lt;密钥口令&gt; -validity &lt;有效天数&gt; -keystore &lt;密钥库名称&gt; -storepass &lt;密钥库口令&gt;</h2><p>替换&lt;&gt;里的内容，并回车</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>keytool <span class="token parameter variable">-genkeypair</span> <span class="token parameter variable">-alias</span> vuedemo <span class="token parameter variable">-keyalg</span> RSA  <span class="token parameter variable">-keysize</span> <span class="token number">2048</span> <span class="token parameter variable">-keypass</span> <span class="token number">123456</span> <span class="token parameter variable">-validity</span> <span class="token number">3660</span> <span class="token parameter variable">-keystore</span> vuedemo.jks <span class="token parameter variable">-storepass</span> <span class="token number">123456</span>
<span class="token comment">#您的名字与姓氏是什么?</span>
<span class="token comment">#  [Unknown]:  Wesley</span>
<span class="token comment">#您的组织单位名称是什么?</span>
<span class="token comment">#  [Unknown]:  Rowe</span>
<span class="token comment">#您的组织名称是什么?</span>
<span class="token comment">#  [Unknown]:  Rowe</span>
<span class="token comment">#您所在的城市或区域名称是什么?</span>
<span class="token comment">#  [Unknown]:  zh</span>
<span class="token comment">#您所在的省/市/自治区名称是什么?</span>
<span class="token comment">#  [Unknown]:  zh</span>
<span class="token comment">#该单位的双字母国家/地区代码是什么?</span>
<span class="token comment">#  [Unknown]:  cn</span>
<span class="token comment">#CN = Wesley, OU = Rowe, O = Rowe, L = zh, ST = zh, C = cn 是否正确?</span>
<span class="token comment">#  [否]:  y</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="将-jks-转为-p12-密钥库" tabindex="-1"><a class="header-anchor" href="#将-jks-转为-p12-密钥库" aria-hidden="true">#</a> 将 JKS 转为 P12 密钥库</h2><p>在终端键入</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>keytool <span class="token parameter variable">-importkeystore</span> <span class="token parameter variable">-srckeystore</span> <span class="token operator">&lt;</span>源密钥库名称<span class="token operator">&gt;</span> <span class="token parameter variable">-destkeystore</span> <span class="token operator">&lt;</span>目标密钥库名称<span class="token operator">&gt;</span> <span class="token parameter variable">-deststoretype</span> <span class="token operator">&lt;</span>目标密钥库类型<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>替换<code>&lt;&gt;</code>里的内容，并回车</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>keytool <span class="token parameter variable">-importkeystore</span> <span class="token parameter variable">-srckeystore</span> vuedemo.jks <span class="token parameter variable">-destkeystore</span> vuedemo.p12 <span class="token parameter variable">-deststoretype</span> pkcs12
<span class="token comment">#正在将密钥库 vuedemo.jks 导入到 vuedemo.p12...</span>
<span class="token comment">#输入目标密钥库口令:</span>
<span class="token comment">#再次输入新口令:</span>
<span class="token comment">#输入源密钥库口令:</span>
<span class="token comment">#已成功导入别名 vuedemo 的条目。</span>
<span class="token comment">#已完成导入命令: 1 个条目成功导入, 0 个条目失败或取消</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="生成证书" tabindex="-1"><a class="header-anchor" href="#生成证书" aria-hidden="true">#</a> 生成证书</h2><p>注意替换为自己的名称</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>openssl pkcs12 <span class="token parameter variable">-in</span> vuedemo.p12 <span class="token parameter variable">-nokeys</span> <span class="token parameter variable">-clcerts</span> <span class="token parameter variable">-out</span> vuedemo.crt
<span class="token comment">#Enter Import Password:</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>openssl pkcs12 <span class="token parameter variable">-in</span> vuedemo.p12 <span class="token parameter variable">-nocerts</span> <span class="token parameter variable">-nodes</span> <span class="token parameter variable">-out</span> vuedemo.key
<span class="token comment">#Enter Import Password:</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>证书生成后移动到 nginx 根目录的<code>conf</code> 文件夹下</strong></p><h2 id="修改-nginx-内容" tabindex="-1"><a class="header-anchor" href="#修改-nginx-内容" aria-hidden="true">#</a> 修改 Nginx 内容</h2><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token comment"># https 配置</span>
	<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">listen</span>       <span class="token number">443</span> ssl</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">server_name</span>  localhost</span><span class="token punctuation">;</span>

        <span class="token directive"><span class="token keyword">ssl_certificate</span>      vuedemo.crt</span><span class="token punctuation">;</span> <span class="token comment"># cert.pem</span>
        <span class="token directive"><span class="token keyword">ssl_certificate_key</span>  vuedemo.key</span><span class="token punctuation">;</span> <span class="token comment"># cert.key</span>

        <span class="token directive"><span class="token keyword">ssl_session_cache</span>    shared:SSL:1m</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">ssl_session_timeout</span>  <span class="token number">5m</span></span><span class="token punctuation">;</span>

        <span class="token directive"><span class="token keyword">ssl_ciphers</span>  HIGH:!aNULL:!MD5</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">ssl_prefer_server_ciphers</span>  <span class="token boolean">on</span></span><span class="token punctuation">;</span>

        <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
            <span class="token directive"><span class="token keyword">root</span>   html</span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">index</span>  index.html index.htm</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token comment"># http 配置转发</span>
    <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">if</span> (<span class="token variable">$host</span> = example.com)</span> <span class="token punctuation">{</span>
            <span class="token directive"><span class="token keyword">return</span> <span class="token number">301</span> https://<span class="token variable">$host</span><span class="token variable">$request_uri</span></span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


        <span class="token directive"><span class="token keyword">listen</span> <span class="token number">80</span> default_server</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">listen</span> [::]:80 default_server</span><span class="token punctuation">;</span>

        <span class="token directive"><span class="token keyword">server_name</span> _</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">return</span> <span class="token number">404</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Windows 终端输入命令重新加载</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>nginx <span class="token parameter variable">-s</span> reload
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="免费-ssl-证书机构" tabindex="-1"><a class="header-anchor" href="#免费-ssl-证书机构" aria-hidden="true">#</a> 免费 SSL 证书机构</h2>`,22),y={href:"https://certbot.eff.org/instructions",target:"_blank",rel:"noopener noreferrer"},_={href:"https://github.com/acmesh-official/acme.sh/wiki/%E8%AF%B4%E6%98%8E",target:"_blank",rel:"noopener noreferrer"},w=s("p",null,"提供以上两个申请SSL的机构，具体使用方法可以自行使用搜索引擎。",-1),f=s("h3",{id:"使用前提",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#使用前提","aria-hidden":"true"},"#"),n(" 使用前提")],-1),x=s("ul",null,[s("li",null,"有一台服务器"),s("li",null,"域名已解析到服务器IP")],-1);function S(E,N){const e=r("ExternalLinkIcon");return l(),i("div",null,[c,s("p",null,[s("a",d,[v,a(e)])]),s("p",null,[s("a",k,[m,a(e)])]),u,s("p",null,[b,n("（"),s("a",h,[n("Git"),a(e)]),n(" 自带）")]),g,s("p",null,[s("a",y,[n("Certbot"),a(e)])]),s("p",null,[s("a",_,[n("Let's Encrypt"),a(e)])]),w,f,x])}const L=t(p,[["render",S],["__file","NginxOpenHttps.html.vue"]]);export{L as default};
